{"version":3,"file":"static/webpack/static/development/pages/campaigns/requests.js.d714e49fc6313004acbb.hot-update.js","sources":["webpack:///./components/RequestRow.js"],"sourcesContent":["import React,{ Component } from 'react';\nimport { Table, Tab , Button } from 'semantic-ui-react';\nimport web3 from '../ethereum/web3';\nimport Campaign from '../ethereum/campaign';\nimport {Router} from '../routes';\nimport { timingSafeEqual } from 'crypto';\nimport { request } from 'https';\nclass RequestRow extends Component {\n\n    state={loading:false,loading_finalize:false};\n\n    onApprove = async (event) =>{\n        event.preventDefault();\n        this.setState({loading:true});\n        try {\n            \n            const accounts = await web3.eth.getAccounts();\n            const campaign = Campaign(this.props.address);\n            await campaign.methods.approveRequest(this.props.id).send({\n                from:accounts[0]\n        });\n        Router.replaceRoute(`/campaigns/${this.props.address}/requests`);\n        } catch (error) {\n            \n        }\n        this.setState({loading:false});\n        \n    };\n\n    onFinalize = async (event) =>{\n        event.preventDefault();\n        this.setState({loading_finalize:true});\n        try {\n            const accounts = await web3.eth.getAccounts();\n            const campaign = Campaign(this.props.address);\n            await campaign.methods.finalizeRequest(this.props.id).send({\n                from:accounts[0]\n            });\n            Router.replaceRoute(`/campaigns/${this.props.address}/requests`);\n        } catch (error) {\n            \n        }\n        this.setState({loading_finalize:false});\n    };\n\n    render(){\n        const { Row,Cell } = Table;\n        const ready_to_finalize= this.props.request.approvalcount > this.props.request.approversCount/2;\n        \n        return(\n            <Row disabled={ this.props.request.complete } positive={ ready_to_finalize && !this.props.request.complete }>\n                <Cell>{this.props.id}</Cell>\n                <Cell>{this.props.request.description}</Cell>\n                <Cell>{web3.utils.fromWei(this.props.request.value,'ether')}</Cell>\n                <Cell>{this.props.request.recipient}</Cell>\n                <Cell>{this.props.request.approvalcount}/{this.props.approversCount}</Cell>\n                { this.props.request.complete ? null : (\n                    <Cell><Button loading={this.state.loading} onClick={this.onApprove}>Approve</Button></Cell>\n                )\n                    \n                }\n                \n                \n                <Cell><Button loading_finalize={this.state.loading_finalize} onClick={this.onFinalize} >Finalize Request</Button></Cell>\n            \n            </Row>\n        );\n    }\n}\n\nexport default RequestRow;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;;;;;;;;;;;;;;AAEA;AAAA;AAAA;AAAA;AACA;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AACA;AADA;AAKA;AACA;AANA;AAAA;AAQA;AADA;AACA;AARA;AAUA;AAVA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAcA;AAAA;AAAA;AACA;AAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;AAiBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AACA;AADA;AAIA;AACA;AALA;AAAA;AAOA;AADA;AACA;AAPA;AASA;AATA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAaA;AAAA;AAAA;AACA;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;AAeA;AAAA;AAAA;AAEA;AAEA;AACA;AAAA;AAAA;AAOA;AAAA;AAAA;AAMA;AAAA;AAAA;AAIA;;;;AA5DA;AACA;AA8DA;;;;A","sourceRoot":""}