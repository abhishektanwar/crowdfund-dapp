{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport React, { Component } from 'react';\nimport Layout from '../../../components/Layout';\nimport { Link } from '../../../routes';\nimport { Button, Table } from 'semantic-ui-react';\nimport Campaign from '../../../ethereum/campaign';\nimport RequestRow from '../../../components/RequestRow';\nimport { request } from 'https';\n\nclass RequestIndexsd extends Component {\n  static async getInitialProps(props) {\n    const {\n      address\n    } = props.query;\n    const campaign = Campaign(address);\n    const requestCount = await campaign.methods.getRequestCount().call();\n    const approversCount = await campaign.methods.approversCount().call();\n    console.log(approversCount);\n    const requests = await _Promise.all(Array(_parseInt(requestCount)).fill().map((element, index) => {\n      return campaign.methods.requests(index).call();\n    }));\n    return {\n      address,\n      requests,\n      approversCount\n    };\n  }\n\n  renderRow() {\n    return this.props.requests.map((request, index) => {\n      return React.createElement(RequestRow, {\n        approversCount: this.props.approversCount,\n        key: index,\n        id: index,\n        request: request,\n        address: this.props.address\n      });\n    });\n  }\n\n  render() {\n    const {\n      Header,\n      Row,\n      HeaderCell,\n      Body\n    } = Table;\n    return React.createElement(Layout, null, React.createElement(\"h3\", null, \"Request List\"), this.props.address, React.createElement(Link, {\n      route: `/campaigns/${this.props.address}/requests/new`\n    }, React.createElement(\"a\", null, React.createElement(Button, {\n      primary: true,\n      floated: \"right\",\n      style: {\n        marginBottom: '10px'\n      }\n    }, \"Add Request\"))), React.createElement(Table, null, React.createElement(Header, null, React.createElement(Row, null, React.createElement(HeaderCell, null, \"ID\"), React.createElement(HeaderCell, null, \"Description\"), React.createElement(HeaderCell, null, \"Amount\"), React.createElement(HeaderCell, null, \"Recipient\"), React.createElement(HeaderCell, null, \"Approval\"), React.createElement(HeaderCell, null, \"Approve\"), React.createElement(HeaderCell, null, \"Finalize\"))), React.createElement(Body, null, this.renderRow())));\n  }\n\n}\n\nexport default RequestIndexsd;","map":{"version":3,"sources":["/home/abhishek/kickstarter_bc/kickstarter_blockchain/crowdfund-dapp/pages/campaigns/requests/index.js"],"names":["React","Component","Layout","Link","Button","Table","Campaign","RequestRow","request","RequestIndexsd","getInitialProps","props","address","query","campaign","requestCount","methods","getRequestCount","call","approversCount","console","log","requests","all","Array","fill","map","element","index","renderRow","render","Header","Row","HeaderCell","Body","marginBottom"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAAgC,OAAhC;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,SAASC,IAAT,QAAqB,iBAArB;AACA,SAASC,MAAT,EAAgBC,KAAhB,QAA6B,mBAA7B;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,UAAP,MAAuB,gCAAvB;AACA,SAASC,OAAT,QAAwB,OAAxB;;AAEA,MAAMC,cAAN,SAA6BR,SAA7B,CAAsC;AAClC,eAAaS,eAAb,CAA6BC,KAA7B,EAAoC;AAChC,UAAM;AAAEC,MAAAA;AAAF,QAAcD,KAAK,CAACE,KAA1B;AACA,UAAMC,QAAQ,GAAGR,QAAQ,CAACM,OAAD,CAAzB;AACA,UAAMG,YAAY,GAAG,MAAMD,QAAQ,CAACE,OAAT,CAAiBC,eAAjB,GAAmCC,IAAnC,EAA3B;AACA,UAAMC,cAAc,GAAG,MAAML,QAAQ,CAACE,OAAT,CAAiBG,cAAjB,GAAkCD,IAAlC,EAA7B;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYF,cAAZ;AACA,UAAMG,QAAQ,GAAG,MAAM,SAAQC,GAAR,CACvBC,KAAK,CAAC,UAAST,YAAT,CAAD,CAAL,CAA8BU,IAA9B,GAAqCC,GAArC,CAAyC,CAACC,OAAD,EAASC,KAAT,KAAkB;AACvD,aAAOd,QAAQ,CAACE,OAAT,CAAiBM,QAAjB,CAA0BM,KAA1B,EAAiCV,IAAjC,EAAP;AACC,KAFL,CADuB,CAAvB;AAIA,WAAO;AAAEN,MAAAA,OAAF;AAAUU,MAAAA,QAAV;AAAmBH,MAAAA;AAAnB,KAAP;AACH;;AAEDU,EAAAA,SAAS,GAAG;AACR,WAAO,KAAKlB,KAAL,CAAWW,QAAX,CAAoBI,GAApB,CAAwB,CAAClB,OAAD,EAASoB,KAAT,KAAiB;AAC5C,aAAO,oBAAC,UAAD;AACH,QAAA,cAAc,EAAE,KAAKjB,KAAL,CAAWQ,cADxB;AAEH,QAAA,GAAG,EAAES,KAFF;AAGH,QAAA,EAAE,EAAEA,KAHD;AAIH,QAAA,OAAO,EAAEpB,OAJN;AAKH,QAAA,OAAO,EAAE,KAAKG,KAAL,CAAWC;AALjB,QAAP;AAOH,KARM,CAAP;AASH;;AAEDkB,EAAAA,MAAM,GAAG;AACL,UAAM;AAAEC,MAAAA,MAAF;AAASC,MAAAA,GAAT;AAAaC,MAAAA,UAAb;AAAwBC,MAAAA;AAAxB,QAAiC7B,KAAvC;AACA,WACI,oBAAC,MAAD,QACI,+CADJ,EAGK,KAAKM,KAAL,CAAWC,OAHhB,EAYI,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAG,cAAa,KAAKD,KAAL,CAAWC,OAAQ;AAA9C,OACI,+BACI,oBAAC,MAAD;AACI,MAAA,OAAO,MADX;AAEI,MAAA,OAAO,EAAC,OAFZ;AAGI,MAAA,KAAK,EAAE;AAAEuB,QAAAA,YAAY,EAAE;AAAhB;AAHX,qBADJ,CADJ,CAZJ,EAwBI,oBAAC,KAAD,QACI,oBAAC,MAAD,QACI,oBAAC,GAAD,QACI,oBAAC,UAAD,aADJ,EAEI,oBAAC,UAAD,sBAFJ,EAGI,oBAAC,UAAD,iBAHJ,EAII,oBAAC,UAAD,oBAJJ,EAKI,oBAAC,UAAD,mBALJ,EAMI,oBAAC,UAAD,kBANJ,EAOI,oBAAC,UAAD,mBAPJ,CADJ,CADJ,EAYI,oBAAC,IAAD,QACK,KAAKN,SAAL,EADL,CAZJ,CAxBJ,CADJ;AA8CH;;AA1EiC;;AA6EtC,eAAepB,cAAf","sourcesContent":["import React,{ Component } from 'react';\nimport Layout from '../../../components/Layout';\nimport { Link } from '../../../routes';\nimport { Button,Table } from 'semantic-ui-react';\nimport Campaign from '../../../ethereum/campaign';\nimport RequestRow from '../../../components/RequestRow';\nimport { request } from 'https';\n\nclass RequestIndexsd extends Component{\n    static async getInitialProps(props) {\n        const { address } = props.query;\n        const campaign = Campaign(address);\n        const requestCount = await campaign.methods.getRequestCount().call();\n        const approversCount = await campaign.methods.approversCount().call();\n        console.log(approversCount);\n        const requests = await Promise.all(\n        Array(parseInt(requestCount)).fill().map((element,index)=> {\n            return campaign.methods.requests(index).call();\n            }));\n        return { address,requests,approversCount };\n    }\n\n    renderRow() {\n        return this.props.requests.map((request,index)=>{\n            return <RequestRow \n                approversCount={this.props.approversCount}\n                key={index}\n                id={index}\n                request={request}\n                address={this.props.address}\n            />\n        })\n    }\n\n    render() {\n        const { Header,Row,HeaderCell,Body } = Table;\n        return(\n            <Layout>\n                <h3>Request List</h3>\n                \n                {this.props.address}\n                {/* <Link route={`/campaigns/${this.props.address}/requests/new`}> \n                    <a>\n                        <Button primary>\n                            Add Request\n                        </Button>\n                    </a>\n                    \n                </Link> */}\n                <Link route={`/campaigns/${this.props.address}/requests/new`}>\n                    <a>\n                        <Button\n                            primary\n                            floated=\"right\"\n                            style={{ marginBottom: '10px' }}\n                        >\n                            Add Request\n                        </Button>\n                    </a>\n                </Link>\n\n                <Table>\n                    <Header>\n                        <Row>\n                            <HeaderCell>ID</HeaderCell>\n                            <HeaderCell>Description</HeaderCell>\n                            <HeaderCell>Amount</HeaderCell>\n                            <HeaderCell>Recipient</HeaderCell>\n                            <HeaderCell>Approval</HeaderCell>\n                            <HeaderCell>Approve</HeaderCell>\n                            <HeaderCell>Finalize</HeaderCell>\n                        </Row>\n                    </Header>\n                    <Body>\n                        {this.renderRow()}\n                    </Body>\n\n                </Table>\n\n            </Layout>\n            \n        );\n    }\n}\n\nexport default RequestIndexsd;\n\n"]},"metadata":{},"sourceType":"module"}