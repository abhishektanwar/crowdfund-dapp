{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React, { Component } from 'react';\nimport Layout from '../../../components/Layout';\nimport { Link } from '../../../routes';\nimport { Button, Table } from 'semantic-ui-react';\nimport Campaign from '../../../ethereum/campaign';\nimport RequestRow from '../../../components/RequestRow';\nimport { request } from 'https';\n\nvar RequestIndexsd =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RequestIndexsd, _Component);\n\n  function RequestIndexsd() {\n    _classCallCheck(this, RequestIndexsd);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(RequestIndexsd).apply(this, arguments));\n  }\n\n  _createClass(RequestIndexsd, [{\n    key: \"renderRow\",\n    value: function renderRow() {\n      var _this = this;\n\n      return this.props.requests.map(function (request, index) {\n        return React.createElement(RequestRow, {\n          key: index,\n          id: index,\n          request: request,\n          address: _this.props.address,\n          approversCount: _this.props.approversCount\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var Header = Table.Header,\n          Row = Table.Row,\n          HeaderCell = Table.HeaderCell,\n          Body = Table.Body;\n      return React.createElement(Layout, null, React.createElement(\"h3\", null, \"Request List\"), this.props.address, React.createElement(Link, {\n        route: \"/campaigns/\".concat(this.props.address, \"/requests/new\")\n      }, React.createElement(\"a\", null, React.createElement(Button, {\n        primary: true,\n        floated: \"right\",\n        style: {\n          marginBottom: '10px'\n        }\n      }, \"Add Request\"))), React.createElement(Table, null, React.createElement(Header, null, React.createElement(Row, null, React.createElement(HeaderCell, null, \"ID\"), React.createElement(HeaderCell, null, \"Description\"), React.createElement(HeaderCell, null, \"Amount\"), React.createElement(HeaderCell, null, \"Recipient\"), React.createElement(HeaderCell, null, \"Approval\"), React.createElement(HeaderCell, null, \"Approve\"), React.createElement(HeaderCell, null, \"Finalize\"))), React.createElement(Body, null, this.renderRow())));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(props) {\n        var address, campaign, requestCount, approversCount, requests;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                address = props.query.address;\n                campaign = Campaign(address);\n                _context.next = 4;\n                return campaign.methods.getRequestCount().call();\n\n              case 4:\n                requestCount = _context.sent;\n                _context.next = 7;\n                return campaign.methods.approversCount().call();\n\n              case 7:\n                approversCount = _context.sent;\n                console.log(approversCount);\n                _context.next = 11;\n                return _Promise.all(Array(_parseInt(requestCount)).fill().map(function (element, index) {\n                  return campaign.methods.requests(index).call();\n                }));\n\n              case 11:\n                requests = _context.sent;\n                return _context.abrupt(\"return\", {\n                  address: address,\n                  requests: requests,\n                  approversCount: approversCount\n                });\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return RequestIndexsd;\n}(Component);\n\nexport default RequestIndexsd;","map":{"version":3,"sources":["/home/abhishek/kickstarter_bc/kickstarter_blockchain/crowdfund-dapp/pages/campaigns/requests/index.js"],"names":["React","Component","Layout","Link","Button","Table","Campaign","RequestRow","request","RequestIndexsd","props","requests","map","index","address","approversCount","Header","Row","HeaderCell","Body","marginBottom","renderRow","query","campaign","methods","getRequestCount","call","requestCount","console","log","all","Array","fill","element"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAAgC,OAAhC;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,SAASC,IAAT,QAAqB,iBAArB;AACA,SAASC,MAAT,EAAgBC,KAAhB,QAA6B,mBAA7B;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,UAAP,MAAuB,gCAAvB;AACA,SAASC,OAAT,QAAwB,OAAxB;;IAEMC,c;;;;;;;;;;;;;gCAcU;AAAA;;AACR,aAAO,KAAKC,KAAL,CAAWC,QAAX,CAAoBC,GAApB,CAAwB,UAACJ,OAAD,EAASK,KAAT,EAAiB;AAC5C,eAAO,oBAAC,UAAD;AAEH,UAAA,GAAG,EAAEA,KAFF;AAGH,UAAA,EAAE,EAAEA,KAHD;AAIH,UAAA,OAAO,EAAEL,OAJN;AAKH,UAAA,OAAO,EAAE,KAAI,CAACE,KAAL,CAAWI,OALjB;AAMH,UAAA,cAAc,EAAE,KAAI,CAACJ,KAAL,CAAWK;AANxB,UAAP;AAQH,OATM,CAAP;AAUH;;;6BAEQ;AAAA,UACGC,MADH,GACkCX,KADlC,CACGW,MADH;AAAA,UACUC,GADV,GACkCZ,KADlC,CACUY,GADV;AAAA,UACcC,UADd,GACkCb,KADlC,CACca,UADd;AAAA,UACyBC,IADzB,GACkCd,KADlC,CACyBc,IADzB;AAEL,aACI,oBAAC,MAAD,QACI,+CADJ,EAGK,KAAKT,KAAL,CAAWI,OAHhB,EAYI,oBAAC,IAAD;AAAM,QAAA,KAAK,uBAAgB,KAAKJ,KAAL,CAAWI,OAA3B;AAAX,SACI,+BACI,oBAAC,MAAD;AACI,QAAA,OAAO,MADX;AAEI,QAAA,OAAO,EAAC,OAFZ;AAGI,QAAA,KAAK,EAAE;AAAEM,UAAAA,YAAY,EAAE;AAAhB;AAHX,uBADJ,CADJ,CAZJ,EAwBI,oBAAC,KAAD,QACI,oBAAC,MAAD,QACI,oBAAC,GAAD,QACI,oBAAC,UAAD,aADJ,EAEI,oBAAC,UAAD,sBAFJ,EAGI,oBAAC,UAAD,iBAHJ,EAII,oBAAC,UAAD,oBAJJ,EAKI,oBAAC,UAAD,mBALJ,EAMI,oBAAC,UAAD,kBANJ,EAOI,oBAAC,UAAD,mBAPJ,CADJ,CADJ,EAYI,oBAAC,IAAD,QACK,KAAKC,SAAL,EADL,CAZJ,CAxBJ,CADJ;AA8CH;;;;;;gDA1E4BX,K;;;;;;AACjBI,gBAAAA,O,GAAYJ,KAAK,CAACY,K,CAAlBR,O;AACFS,gBAAAA,Q,GAAWjB,QAAQ,CAACQ,OAAD,C;;uBACES,QAAQ,CAACC,OAAT,CAAiBC,eAAjB,GAAmCC,IAAnC,E;;;AAArBC,gBAAAA,Y;;uBACuBJ,QAAQ,CAACC,OAAT,CAAiBT,cAAjB,GAAkCW,IAAlC,E;;;AAAvBX,gBAAAA,c;AACNa,gBAAAA,OAAO,CAACC,GAAR,CAAYd,cAAZ;;uBACuB,SAAQe,GAAR,CACvBC,KAAK,CAAC,UAASJ,YAAT,CAAD,CAAL,CAA8BK,IAA9B,GAAqCpB,GAArC,CAAyC,UAACqB,OAAD,EAASpB,KAAT,EAAkB;AACvD,yBAAOU,QAAQ,CAACC,OAAT,CAAiBb,QAAjB,CAA0BE,KAA1B,EAAiCa,IAAjC,EAAP;AACC,iBAFL,CADuB,C;;;AAAjBf,gBAAAA,Q;iDAIC;AAAEG,kBAAAA,OAAO,EAAPA,OAAF;AAAUH,kBAAAA,QAAQ,EAARA,QAAV;AAAmBI,kBAAAA,cAAc,EAAdA;AAAnB,iB;;;;;;;;;;;;;;;;;;;EAXcd,S;;AA8E7B,eAAeQ,cAAf","sourcesContent":["import React,{ Component } from 'react';\nimport Layout from '../../../components/Layout';\nimport { Link } from '../../../routes';\nimport { Button,Table } from 'semantic-ui-react';\nimport Campaign from '../../../ethereum/campaign';\nimport RequestRow from '../../../components/RequestRow';\nimport { request } from 'https';\n\nclass RequestIndexsd extends Component{\n    static async getInitialProps(props) {\n        const { address } = props.query;\n        const campaign = Campaign(address);\n        const requestCount = await campaign.methods.getRequestCount().call();\n        const approversCount = await campaign.methods.approversCount().call();\n        console.log(approversCount);\n        const requests = await Promise.all(\n        Array(parseInt(requestCount)).fill().map((element,index)=> {\n            return campaign.methods.requests(index).call();\n            }));\n        return { address,requests,approversCount };\n    }\n\n    renderRow() {\n        return this.props.requests.map((request,index)=>{\n            return <RequestRow \n                \n                key={index}\n                id={index}\n                request={request}\n                address={this.props.address}\n                approversCount={this.props.approversCount}\n            />\n        })\n    }\n\n    render() {\n        const { Header,Row,HeaderCell,Body } = Table;\n        return(\n            <Layout>\n                <h3>Request List</h3>\n                \n                {this.props.address}\n                {/* <Link route={`/campaigns/${this.props.address}/requests/new`}> \n                    <a>\n                        <Button primary>\n                            Add Request\n                        </Button>\n                    </a>\n                    \n                </Link> */}\n                <Link route={`/campaigns/${this.props.address}/requests/new`}>\n                    <a>\n                        <Button\n                            primary\n                            floated=\"right\"\n                            style={{ marginBottom: '10px' }}\n                        >\n                            Add Request\n                        </Button>\n                    </a>\n                </Link>\n\n                <Table>\n                    <Header>\n                        <Row>\n                            <HeaderCell>ID</HeaderCell>\n                            <HeaderCell>Description</HeaderCell>\n                            <HeaderCell>Amount</HeaderCell>\n                            <HeaderCell>Recipient</HeaderCell>\n                            <HeaderCell>Approval</HeaderCell>\n                            <HeaderCell>Approve</HeaderCell>\n                            <HeaderCell>Finalize</HeaderCell>\n                        </Row>\n                    </Header>\n                    <Body>\n                        {this.renderRow()}\n                    </Body>\n\n                </Table>\n\n            </Layout>\n            \n        );\n    }\n}\n\nexport default RequestIndexsd;\n\n"]},"metadata":{},"sourceType":"module"}