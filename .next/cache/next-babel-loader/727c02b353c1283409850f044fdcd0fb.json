{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\nimport { Form, Input, Message, Button } from 'semantic-ui-react';\nimport Campaign from '../ethereum/campaign';\nimport web3 from '../ethereum/web3';\nimport { Router } from '../routes';\n\nclass ContributeForm extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      value: ''\n    });\n\n    _defineProperty(this, \"onSubmit\", async event => {\n      event.preventDefault();\n      this.setState({\n        loading: true,\n        errorMessage: ''\n      });\n      const campaign = Campaign(this.props.address);\n\n      try {\n        const accounts = await web3.eth.getAccounts();\n        await campaign.methods.contribute().send({\n          from: accounts[0],\n          value: web3.utils.toWei(this.state.value, 'ether')\n        });\n        Router.replaceRoute(`/campaigns/${this.props.address}`);\n      } catch (err) {\n        this.setState({\n          errorMessage: err.message\n        });\n      }\n\n      this.setState({\n        loading: false,\n        value: ''\n      });\n    });\n  }\n\n  render() {\n    // return (\n    //     <Form onSubmit={this.onSubmit}>\n    //     <Form.Field>\n    //         <label>Amount to Contribute</label>\n    //         <Input \n    //             value={this.state.value}\n    //             onChange={event => {this.setState({ value: event.target.value });} }\n    //             label=\"ether\" \n    //             labelPosition=\"right\" />\n    //     </Form.Field>\n    //     <Button primary>Contribute</Button>\n    // </Form>\n    // );\n    return React.createElement(Form, {\n      onSubmit: this.onSubmit,\n      error: !!this.state.errorMessage\n    }, React.createElement(Form.Field, null, React.createElement(\"label\", null, \"Amount to Contribute\"), React.createElement(Input, {\n      value: this.state.value,\n      onChange: event => {\n        this.setState({\n          value: event.target.value\n        });\n      },\n      label: \"ether\",\n      labelPosition: \"right\"\n    })), React.createElement(Message, {\n      error: true,\n      header: \"There was some errors with your submission\",\n      content: this.state.errorMessage\n    }), React.createElement(Button, {\n      loading: this.state.loading,\n      primary: true\n    }, \"Contribute\"));\n  }\n\n}\n\nexport default ContributeForm;","map":{"version":3,"sources":["/home/abhishek/kickstarter_bc/kickstarter_blockchain/crowdfund-dapp/components/ContributeForm.js"],"names":["React","Component","Form","Input","Message","Button","Campaign","web3","Router","ContributeForm","value","event","preventDefault","setState","loading","errorMessage","campaign","props","address","accounts","eth","getAccounts","methods","contribute","send","from","utils","toWei","state","replaceRoute","err","message","render","onSubmit","target"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAAgC,OAAhC;AACA,SAASC,IAAT,EAAcC,KAAd,EAAoBC,OAApB,EAA6BC,MAA7B,QAA2C,mBAA3C;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,SAASC,MAAT,QAAuB,WAAvB;;AACA,MAAMC,cAAN,SAA6BR,SAA7B,CAAuC;AAAA;AAAA;;AAAA,mCAC3B;AACJS,MAAAA,KAAK,EAAC;AADF,KAD2B;;AAAA,sCAkBxB,MAAMC,KAAN,IAAe;AACtBA,MAAAA,KAAK,CAACC,cAAN;AACA,WAAKC,QAAL,CAAc;AAAEC,QAAAA,OAAO,EAAE,IAAX;AAAiBC,QAAAA,YAAY,EAAE;AAA/B,OAAd;AACA,YAAMC,QAAQ,GAAGV,QAAQ,CAAC,KAAKW,KAAL,CAAWC,OAAZ,CAAzB;;AAEA,UAAI;AACA,cAAMC,QAAQ,GAAG,MAAMZ,IAAI,CAACa,GAAL,CAASC,WAAT,EAAvB;AACA,cAAML,QAAQ,CAACM,OAAT,CAAiBC,UAAjB,GAA8BC,IAA9B,CAAmC;AACrCC,UAAAA,IAAI,EAAEN,QAAQ,CAAC,CAAD,CADuB;AAErCT,UAAAA,KAAK,EAAEH,IAAI,CAACmB,KAAL,CAAWC,KAAX,CAAiB,KAAKC,KAAL,CAAWlB,KAA5B,EAAmC,OAAnC;AAF8B,SAAnC,CAAN;AAIAF,QAAAA,MAAM,CAACqB,YAAP,CAAqB,cAAa,KAAKZ,KAAL,CAAWC,OAAQ,EAArD;AACH,OAPD,CAOE,OAAOY,GAAP,EAAY;AACV,aAAKjB,QAAL,CAAc;AAAEE,UAAAA,YAAY,EAAEe,GAAG,CAACC;AAApB,SAAd;AACH;;AACD,WAAKlB,QAAL,CAAc;AAAEC,QAAAA,OAAO,EAAE,KAAX;AAAkBJ,QAAAA,KAAK,EAAE;AAAzB,OAAd;AACH,KAlCkC;AAAA;;AAoCnCsB,EAAAA,MAAM,GAAE;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WACI,oBAAC,IAAD;AAAM,MAAA,QAAQ,EAAE,KAAKC,QAArB;AAA+B,MAAA,KAAK,EAAE,CAAC,CAAC,KAAKL,KAAL,CAAWb;AAAnD,OACI,oBAAC,IAAD,CAAM,KAAN,QACI,0DADJ,EAEI,oBAAC,KAAD;AACI,MAAA,KAAK,EAAE,KAAKa,KAAL,CAAWlB,KADtB;AAEI,MAAA,QAAQ,EAAEC,KAAK,IAAI;AACf,aAAKE,QAAL,CAAc;AAAEH,UAAAA,KAAK,EAAEC,KAAK,CAACuB,MAAN,CAAaxB;AAAtB,SAAd;AACH,OAJL;AAKI,MAAA,KAAK,EAAC,OALV;AAMI,MAAA,aAAa,EAAC;AANlB,MAFJ,CADJ,EAYI,oBAAC,OAAD;AACI,MAAA,KAAK,MADT;AAEI,MAAA,MAAM,EAAC,4CAFX;AAGI,MAAA,OAAO,EAAE,KAAKkB,KAAL,CAAWb;AAHxB,MAZJ,EAiBI,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,KAAKa,KAAL,CAAWd,OAA5B;AAAqC,MAAA,OAAO;AAA5C,oBAjBJ,CADJ;AAuBH;;AAzEkC;;AA4EvC,eAAeL,cAAf","sourcesContent":["import React,{ Component } from 'react';\nimport { Form,Input,Message, Button } from 'semantic-ui-react';\nimport Campaign from '../ethereum/campaign';\nimport web3 from '../ethereum/web3';\nimport { Router } from '../routes';\nclass ContributeForm extends Component {\n    state = {\n        value:''\n    };\n    \n    // onSubmit = async (event) => {\n    //     event.preventDefault();\n    //     const campaign = Campaign(this.props.address);\n    //     // console.log(this.props.address);\n    //     try {\n    //         const accounts = await web3.eth.getAccounts();\n    //         // console.log(accounts[0]);\n    //         await campaign.methods.contribute().send({\n    //             from: accounts[0],\n    //             value: web3.utils.toWie(this.state.value,'ether')\n    //     });\n    //     } catch (error) {}\n    // };\n    onSubmit = async event => {\n        event.preventDefault();\n        this.setState({ loading: true, errorMessage: '' });\n        const campaign = Campaign(this.props.address);\n\n        try {\n            const accounts = await web3.eth.getAccounts();\n            await campaign.methods.contribute().send({\n                from: accounts[0],\n                value: web3.utils.toWei(this.state.value, 'ether'),\n            });\n            Router.replaceRoute(`/campaigns/${this.props.address}`);\n        } catch (err) {\n            this.setState({ errorMessage: err.message });\n        }\n        this.setState({ loading: false, value: '' });\n    };\n\n    render(){\n        // return (\n        //     <Form onSubmit={this.onSubmit}>\n        //     <Form.Field>\n        //         <label>Amount to Contribute</label>\n        //         <Input \n        //             value={this.state.value}\n        //             onChange={event => {this.setState({ value: event.target.value });} }\n        //             label=\"ether\" \n        //             labelPosition=\"right\" />\n        //     </Form.Field>\n        //     <Button primary>Contribute</Button>\n        // </Form>\n        // );\n        return (\n            <Form onSubmit={this.onSubmit} error={!!this.state.errorMessage}>\n                <Form.Field>\n                    <label>Amount to Contribute</label>\n                    <Input\n                        value={this.state.value}\n                        onChange={event => {\n                            this.setState({ value: event.target.value });\n                        }}\n                        label=\"ether\"\n                        labelPosition=\"right\"\n                    />\n                </Form.Field>\n                <Message\n                    error\n                    header=\"There was some errors with your submission\"\n                    content={this.state.errorMessage}\n                />\n                <Button loading={this.state.loading} primary>\n                    Contribute\n                </Button>\n            </Form>\n        );\n    }\n}\n\nexport default ContributeForm;"]},"metadata":{},"sourceType":"module"}