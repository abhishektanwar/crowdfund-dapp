{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React, { Component } from 'react';\nimport Layout from '../../components/Layout';\nimport Campaign from '../../ethereum/campaign';\nimport { Card, Grid, Button } from 'semantic-ui-react';\nimport web3 from '../../ethereum/web3';\nimport ContributeForm from '../../components/ContributeForm';\nimport { Link } from '../../routes';\n\nvar campaignShow =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(campaignShow, _Component);\n\n  function campaignShow() {\n    _classCallCheck(this, campaignShow);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(campaignShow).apply(this, arguments));\n  }\n\n  _createClass(campaignShow, [{\n    key: \"renderCards\",\n    value: function renderCards() {\n      var _this$props = this.props,\n          balance = _this$props.balance,\n          manager = _this$props.manager,\n          requestsCount = _this$props.requestsCount,\n          minimumContribution = _this$props.minimumContribution,\n          approversCount = _this$props.approversCount;\n      var items = [{\n        header: manager,\n        meta: 'Address of Manager',\n        style: {\n          overflowWrap: 'break-word'\n        },\n        description: 'Manager created this campaign and can create requests to withdraw funds'\n      }, {\n        header: minimumContribution,\n        meta: 'Minimum Contribution(wei)',\n        description: 'You must contribute atleast this much to become an approver'\n      }, {\n        header: requestsCount,\n        meta: 'Number of Request',\n        description: 'A request is created by manager to withdraw funds from contract.Requests must be approved by withdrawers'\n      }, {\n        header: approversCount,\n        meta: 'NUmber of approvers',\n        description: 'Number of people who have already donated to this campaign/contract'\n      }, {\n        header: web3.utils.fromWei(balance, 'ether'),\n        meta: 'Campaign balance (ether)',\n        description: 'The balance is how much money this campaign has left to spend'\n      }];\n      return React.createElement(Card.Group, {\n        items: items\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Layout, null, React.createElement(\"h3\", null, \"Campaign Show\"), React.createElement(Grid, null, React.createElement(Grid.Row, null, React.createElement(Grid.Column, {\n        width: 10\n      }, this.renderCards(), React.createElement(Grid.Row, null, React.createElement(Grid.Column, null, React.createElement(Link, {\n        route: \"/campaigns/\".concat(this.props.address, \"/requests\")\n      }, React.createElement(\"a\", null, React.createElement(Button, {\n        primary: true\n      }, \"View Requests\")))))), React.createElement(Grid.Column, {\n        width: 6\n      }, React.createElement(ContributeForm, {\n        address: this.props.address\n      })))));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    // fetching the summary first\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(props) {\n        var campaign, summary;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // getting address out of url\n                campaign = Campaign(props.query.address); // console.log(props.query.address);\n\n                _context.next = 3;\n                return campaign.methods.getSummary().call();\n\n              case 3:\n                summary = _context.sent;\n                return _context.abrupt(\"return\", {\n                  address: props.query.address,\n                  minimumContribution: summary[0],\n                  balance: summary[1],\n                  requestsCount: summary[2],\n                  approversCount: summary[3],\n                  manager: summary[4]\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return campaignShow;\n}(Component);\n\nexport default campaignShow;","map":{"version":3,"sources":["/home/abhishek/kickstarter_bc/kickstarter_blockchain/crowdfund-dapp/pages/campaigns/show.js"],"names":["React","Component","Layout","Campaign","Card","Grid","Button","web3","ContributeForm","Link","campaignShow","props","balance","manager","requestsCount","minimumContribution","approversCount","items","header","meta","style","overflowWrap","description","utils","fromWei","renderCards","address","campaign","query","methods","getSummary","call","summary"],"mappings":"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","sourcesContent":["import React,{ Component } from 'react';\nimport Layout from '../../components/Layout';\nimport Campaign from '../../ethereum/campaign';\nimport { Card,Grid,Button } from 'semantic-ui-react';\nimport web3 from '../../ethereum/web3';\nimport ContributeForm from '../../components/ContributeForm';\nimport { Link } from '../../routes';\n\nclass campaignShow extends Component {\n    // fetching the summary first\n    static async getInitialProps(props) {\n        // getting address out of url\n        const campaign = Campaign(props.query.address);\n        // console.log(props.query.address);\n        const summary = await campaign.methods.getSummary().call();\n        // console.log(summary);\n        return { \n            address:props.query.address,\n            minimumContribution: summary[0],            \n            balance: summary[1],\n            requestsCount: summary[2],\n            approversCount: summary[3],\n            manager: summary[4]\n         };\n    }\n\n    renderCards() {\n        const {\n            \n            balance,\n            manager,\n            requestsCount,\n            minimumContribution,\n            approversCount\n        }= this.props;\n        const items = [\n            {\n                header: manager,\n                meta: 'Address of Manager',\n                style: { overflowWrap: 'break-word' },\n                description:'Manager created this campaign and can create requests to withdraw funds'\n            },\n            {\n                header:minimumContribution,\n                meta:'Minimum Contribution(wei)',\n                description:'You must contribute atleast this much to become an approver'\n            },\n            {\n                header:requestsCount,\n                meta:'Number of Request',\n                description:'A request is created by manager to withdraw funds from contract.Requests must be approved by withdrawers'\n            },\n            {\n                header:approversCount,\n                meta:'NUmber of approvers',\n                description:'Number of people who have already donated to this campaign/contract'\n            },\n            {\n                header:web3.utils.fromWei(balance,'ether'),\n                meta:'Campaign balance (ether)',\n                description:'The balance is how much money this campaign has left to spend'\n            }\n            \n            \n            \n        ];\n        return <Card.Group items={items} />;\n    }\n    \n    \n    render() {\n        return (\n            <Layout>\n                <h3>Campaign Show</h3>\n                <Grid>\n                    <Grid.Row>\n\n                    \n                    <Grid.Column width={10}>\n                    {this.renderCards()}\n                    <Grid.Row>\n                        <Grid.Column>\n                        <Link route={`/campaigns/${this.props.address}/requests`}>\n                            <a>\n                                <Button primary>\n                                    View Requests\n                                </Button>\n                            </a>\n                        </Link>\n                        </Grid.Column>\n                    </Grid.Row>\n                    \n                    </Grid.Column>\n                    <Grid.Column width={6}>\n                    <ContributeForm address={this.props.address} />        \n                    </Grid.Column>\n                    </Grid.Row>\n                </Grid>\n                \n                \n            </Layout>\n            \n        );\n    }\n}\nexport default campaignShow;"]},"metadata":{},"sourceType":"module"}