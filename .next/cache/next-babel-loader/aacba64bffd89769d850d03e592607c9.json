{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\nimport { Table, Tab, Button } from 'semantic-ui-react';\nimport web3 from '../ethereum/web3';\nimport Campaign from '../ethereum/campaign';\nimport { Router } from '../routes';\nimport { timingSafeEqual } from 'crypto';\n\nclass RequestRow extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      loading: false\n    });\n\n    _defineProperty(this, \"onApprove\", async event => {\n      event.preventDefault();\n      this.setState({\n        loading: true\n      });\n\n      try {\n        const accounts = await web3.eth.getAccounts();\n        const campaign = Campaign(this.props.address);\n        await campaign.methods.approveRequest(this.props.id).send({\n          from: accounts[0]\n        });\n        Router.pushRoute('/campaigns');\n      } catch (error) {}\n\n      this.setState({\n        loading: false\n      });\n    });\n\n    _defineProperty(this, \"onFinalize\", async () => {\n      const campaign = Campaign(this.props.address);\n      const accounts = web3.eth.getAccounts();\n      await campaign.methods.finalizeRequest(this.props.id).send({\n        from: accounts[0]\n      });\n    });\n  }\n\n  render() {\n    const {\n      Row,\n      Cell\n    } = Table;\n    return React.createElement(Row, null, React.createElement(Cell, null, this.props.id), React.createElement(Cell, null, this.props.request.description), React.createElement(Cell, null, web3.utils.fromWei(this.props.request.value, 'ether')), React.createElement(Cell, null, this.props.request.recipient), React.createElement(Cell, null, this.props.request.approvalcount, \"/\", this.props.approversCount), React.createElement(Cell, null, React.createElement(Button, {\n      loading: this.state.loading,\n      onClick: this.onApprove\n    }, \"Approve\")), React.createElement(Cell, null, React.createElement(Button, {\n      onClick: this.onFinalize\n    }, \"Finalize Request\")));\n  }\n\n}\n\nexport default RequestRow;","map":{"version":3,"sources":["/home/abhishek/kickstarter_bc/kickstarter_blockchain/crowdfund-dapp/components/RequestRow.js"],"names":["React","Component","Table","Tab","Button","web3","Campaign","Router","timingSafeEqual","RequestRow","loading","event","preventDefault","setState","accounts","eth","getAccounts","campaign","props","address","methods","approveRequest","id","send","from","pushRoute","error","finalizeRequest","render","Row","Cell","request","description","utils","fromWei","value","recipient","approvalcount","approversCount","state","onApprove","onFinalize"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAAgC,OAAhC;AACA,SAASC,KAAT,EAAgBC,GAAhB,EAAsBC,MAAtB,QAAoC,mBAApC;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,SAAQC,MAAR,QAAqB,WAArB;AACA,SAASC,eAAT,QAAgC,QAAhC;;AACA,MAAMC,UAAN,SAAyBR,SAAzB,CAAmC;AAAA;AAAA;;AAAA,mCAEzB;AAACS,MAAAA,OAAO,EAAC;AAAT,KAFyB;;AAAA,uCAInB,MAAOC,KAAP,IAAgB;AACxBA,MAAAA,KAAK,CAACC,cAAN;AACA,WAAKC,QAAL,CAAc;AAACH,QAAAA,OAAO,EAAC;AAAT,OAAd;;AACA,UAAI;AAEA,cAAMI,QAAQ,GAAG,MAAMT,IAAI,CAACU,GAAL,CAASC,WAAT,EAAvB;AACA,cAAMC,QAAQ,GAAGX,QAAQ,CAAC,KAAKY,KAAL,CAAWC,OAAZ,CAAzB;AACA,cAAMF,QAAQ,CAACG,OAAT,CAAiBC,cAAjB,CAAgC,KAAKH,KAAL,CAAWI,EAA3C,EAA+CC,IAA/C,CAAoD;AACtDC,UAAAA,IAAI,EAACV,QAAQ,CAAC,CAAD;AADyC,SAApD,CAAN;AAGJP,QAAAA,MAAM,CAACkB,SAAP,CAAiB,YAAjB;AACC,OARD,CAQE,OAAOC,KAAP,EAAc,CAEf;;AACD,WAAKb,QAAL,CAAc;AAACH,QAAAA,OAAO,EAAC;AAAT,OAAd;AAEH,KApB8B;;AAAA,wCAsBlB,YAAW;AACpB,YAAMO,QAAQ,GAAGX,QAAQ,CAAC,KAAKY,KAAL,CAAWC,OAAZ,CAAzB;AAEA,YAAML,QAAQ,GAAGT,IAAI,CAACU,GAAL,CAASC,WAAT,EAAjB;AACA,YAAMC,QAAQ,CAACG,OAAT,CAAiBO,eAAjB,CAAiC,KAAKT,KAAL,CAAWI,EAA5C,EAAgDC,IAAhD,CAAqD;AACvDC,QAAAA,IAAI,EAACV,QAAQ,CAAC,CAAD;AAD0C,OAArD,CAAN;AAMH,KAhC8B;AAAA;;AAkC/Bc,EAAAA,MAAM,GAAE;AACJ,UAAM;AAAEC,MAAAA,GAAF;AAAMC,MAAAA;AAAN,QAAe5B,KAArB;AAEA,WACI,oBAAC,GAAD,QACI,oBAAC,IAAD,QAAO,KAAKgB,KAAL,CAAWI,EAAlB,CADJ,EAEI,oBAAC,IAAD,QAAO,KAAKJ,KAAL,CAAWa,OAAX,CAAmBC,WAA1B,CAFJ,EAGI,oBAAC,IAAD,QAAO3B,IAAI,CAAC4B,KAAL,CAAWC,OAAX,CAAmB,KAAKhB,KAAL,CAAWa,OAAX,CAAmBI,KAAtC,EAA4C,OAA5C,CAAP,CAHJ,EAII,oBAAC,IAAD,QAAO,KAAKjB,KAAL,CAAWa,OAAX,CAAmBK,SAA1B,CAJJ,EAKI,oBAAC,IAAD,QAAO,KAAKlB,KAAL,CAAWa,OAAX,CAAmBM,aAA1B,OAA0C,KAAKnB,KAAL,CAAWoB,cAArD,CALJ,EAMI,oBAAC,IAAD,QAAM,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,KAAKC,KAAL,CAAW7B,OAA5B;AAAqC,MAAA,OAAO,EAAE,KAAK8B;AAAnD,iBAAN,CANJ,EAOI,oBAAC,IAAD,QAAM,oBAAC,MAAD;AAAS,MAAA,OAAO,EAAE,KAAKC;AAAvB,0BAAN,CAPJ,CADJ;AAYH;;AAjD8B;;AAoDnC,eAAehC,UAAf","sourcesContent":["import React,{ Component } from 'react';\nimport { Table, Tab , Button } from 'semantic-ui-react';\nimport web3 from '../ethereum/web3';\nimport Campaign from '../ethereum/campaign';\nimport {Router} from '../routes';\nimport { timingSafeEqual } from 'crypto';\nclass RequestRow extends Component {\n\n    state={loading:false};\n\n    onApprove = async (event) =>{\n        event.preventDefault();\n        this.setState({loading:true});\n        try {\n            \n            const accounts = await web3.eth.getAccounts();\n            const campaign = Campaign(this.props.address);\n            await campaign.methods.approveRequest(this.props.id).send({\n                from:accounts[0]\n        });\n        Router.pushRoute('/campaigns');\n        } catch (error) {\n            \n        }\n        this.setState({loading:false});\n        \n    };\n\n    onFinalize = async () =>{\n        const campaign = Campaign(this.props.address);\n\n        const accounts = web3.eth.getAccounts();\n        await campaign.methods.finalizeRequest(this.props.id).send({\n            from:accounts[0]\n        });\n        \n        \n        \n    };\n\n    render(){\n        const { Row,Cell } = Table;\n        \n        return(\n            <Row>\n                <Cell>{this.props.id}</Cell>\n                <Cell>{this.props.request.description}</Cell>\n                <Cell>{web3.utils.fromWei(this.props.request.value,'ether')}</Cell>\n                <Cell>{this.props.request.recipient}</Cell>\n                <Cell>{this.props.request.approvalcount}/{this.props.approversCount}</Cell>\n                <Cell><Button loading={this.state.loading} onClick={this.onApprove}>Approve</Button></Cell>\n                <Cell><Button  onClick={this.onFinalize} >Finalize Request</Button></Cell>\n            \n            </Row>\n        );\n    }\n}\n\nexport default RequestRow;"]},"metadata":{},"sourceType":"module"}